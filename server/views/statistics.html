<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
        <title>今日统计</title>
        <link rel="stylesheet" href="{{static_host}}/bootstrap.min.css">
        <style media="screen">
            body{
                background: #EDEDED;
            }
            @media screen and (min-width:1024px){
                .wrap{
                    width: 768px;
                    margin: 0 auto;
                }
            }
            .head{
                width: 100%;
                height: 64px;
                line-height: 64px;
                text-align: center;
                font-size: 16px;
                color: #fff;
                background: #44a338;
            }
            .middle{
                background: #fff;
                overflow: hidden;
            }
            .number{
                font-size: 18px;
                text-align: center;
            }
            .number p:last-child{
                font-size: 14px;
            }
            .number1,.number3{
                border-right: 1px solid #F1F1F1;
            }
            .number1,.number2{
                border-bottom: 1px solid #F1F1F1;
            }
            .number3,.number4{
                padding-top: 7px;
            }
            .back{
                background: #EDEDED;
                height: 30px;
                line-height: 30px;
                text-align: right;
                padding-right: 10px;
                font-size: 12px;
            }
            .number p:first-child{
                color: #44a338;
                font-weight: 400;
                font-size: 24px;
            }
            .number4{
                height: 66px;
                line-height: 66px;
            }
            .picture{
                text-align: center;
                margin-top: 17px;
            }

        </style>
    </head>
    <body>
        <div id="statistics"></div>


        <script type="text/babel">

        class Wrap extends React.Component {
            render() {
                return (
                    <div className="wrap">
                        <Head/>
                        <Middle/>
                        <Picture/>
                    </div>
                );
            }
        };

        // 头部
        class Head extends React.Component {
            render() {
                return (
                    <div className="head">
                        今日销售
                    </div>
                );
            }
        };

        // 中间
        class Middle extends React.Component {
            constructor(props) {
                super(props);
                // 初始化一个空对象
                this.state = {items: {}};
            }

            componentDidMount() {
                $.ajax({
                  url: "/get_orders_byDate",
                  dataType: 'json',
                  type: 'GET',
                  success: function(data) {
                      this.setState({items:data});
                  }.bind(this),
                  error: function(xhr, status, err) {
                  }.bind(this)
              });
            }
            render() {
                var time = this.state.items.time;
                var total_sales = this.state.items.total_sales;
                var order_num = this.state.items.order_num;
                var total_products = this.state.items.total_products;
                return (
                    <div className="middle">
                        <p className="back">统计时间:{time}</p>
                        <div className="col-xs-6 col-sm-6 number number1"><p>￥{total_sales}</p><p>营业额</p></div>
                        <div className="col-xs-6 col-sm-6 number number2"><p>{order_num}</p><p>订单数</p></div>
                        <div className="col-xs-6 col-sm-6 number number3"><p>{total_products}</p><p>件数</p></div>
                        <div className="col-xs-6 col-sm-6 number number4"><p>...</p></div>
                    </div>
                );
            }
        };
        // 图片
        class Picture extends React.Component {
            render() {
                return (
                    <div className="picture">
                        <img src="{{static_host}}/dong.gif" alt="" />
                    </div>
                );
            }
        };

        // 返回到页面
        ReactDOM.render(
            <Wrap/>,
            document.getElementById("statistics")
        );
        </script>


        <!-- <script language="JavaScript">
        function myrefresh(){
        window.location.reload();
        }
        setTimeout('myrefresh()',8000); //指定秒刷新一次
        </script> -->


        <script src="{{static_host}}/react.min.js"></script>
        <script src="{{static_host}}/react-dom.min.js"></script>
        <script src="{{static_host}}/jquery-3.1.1.min.js" type="text/javascript"></script>
        <script src="{{static_host}}/bootstrap.min.js"></script>
        <script src="{{static_host}}/statistics.min.js"></script>
    </body>
</html>
